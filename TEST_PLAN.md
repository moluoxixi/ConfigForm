# Playground 测试计划

## 测试矩阵：48 场景 × 3 模式（编辑态/阅读态/禁用态） × 2 端（Vue/React）

### 开发服务器
- Vue: http://localhost:3001 (playground-vue, `pnpm dev`)
- React: http://localhost:3002 (playground-react, `pnpm dev`)

### 测试标准
每个场景必须验证：
1. **编辑态**：填写字段、校验、提交（验证 JSON 数据）、重置（验证恢复初始值）
2. **阅读态**：字段纯文本展示、操作按钮隐藏
3. **禁用态**：字段 disabled、操作按钮隐藏

---

## 已修复的核心问题

| # | 问题 | 严重度 | 提交 |
|---|---|---|---|
| 1 | Field.setValue() 不清除验证错误 | P0 | 4afffa7 |
| 2 | Field.setValue() 不通知 form（reactions/onValuesChange 不触发） | P0 | 4afffa7 |
| 3 | FormField 创建字段时不继承 form.pattern | P1 | 4afffa7 |
| 4 | @ant-design/icons 依赖缺失 | P1 | 326da75 |
| 5 | field 模式缺少重置按钮 | P2 | bb4e112 |
| 6 | collectSubmitValues 响应式引用泄漏（数组删除后提交数据污染） | P0 | 78726a8 |
| 7 | FormField/FormArrayField unmount 时未清理字段注册 | P1 | 78726a8 |
| 8 | MobX 下联动不触发（getFieldValue 被 action.bound 包装导致依赖追踪失效） | P0 | 903e16d |
| 9 | Schema 重构：ISchema JSON Schema 风格 + address/dataPath 分离 + ReactiveField 桥接 | 重构 | 263b197 |

---

## Vue antd-vue 测试

### 基础场景（Config 模式）
- [x] 1.基础表单：全部字段类型渲染 + 必填校验 + 提交 + 重置 + 三态
- [x] 2.表单布局：4 种布局切换 + labelWidth 生效 + 三态
- [x] 3.必填与格式验证：空提交必填错误 + 邮箱/手机/URL 格式校验 + 三态
- [x] 4.默认值：静态默认值 + 动态计算（数量×单价=总价） + 重置恢复 + 三态

### 联动场景
- [x] 5.显隐联动：个人/企业切换 + 开关控制 + 嵌套显隐 + 提交排除隐藏字段 + 三态
- [x] 6.值联动：姓名拼接 + 大写转换 + 国家→区号映射 + 三态
- [x] 7.属性联动：开关控制 disabled + 类型切换 placeholder/required + 三态
- [x] 8.级联选择：省→市→区三级联动 + 多级分类 + 三态
- [x] 9.计算字段：乘法/折扣/聚合/条件计税 + 三态
- [x] 10.条件必填：开关→发票必填 + 金额阈值→审批人 + 三态

### 验证场景
- [x] 11.自定义验证：车牌正则 + 手机号函数 + 密码多规则 + 三态
- [x] 12.异步验证：admin 用户名已注册 + 邮箱异步 + 三态
- [x] 13.跨字段验证：密码不一致 + 比例总和 100% + 超预算 + 三态

### 复杂数据
- [x] 14.嵌套对象：void Card 分组 + 提交扁平数据（void 不参与路径） + 三态
- [x] 15.数组字段：增删排序 + 提交正确（无脏数据泄漏） + 重置 + 三态
- [x] 16.可编辑表格：行内编辑 + 计算联动 + 添加删除行 + 三态
- [x] 17.对象数组嵌套：联系人+嵌套电话数组 + 提交嵌套 JSON + 三态

### 数据源（走 field.loadDataSource 管线）
- [x] 18.异步选项：fireImmediately 初始加载 + 切换类型异步加载 + loading + placeholder 动态更新 + 三态
- [x] 19.依赖数据源：品牌→型号→配置三级远程链 + API 日志面板 + 三态
- [x] 20.分页搜索：搜索过滤 + 分页加载 + 防抖 + 三态

### 布局分组（void 节点 + LayoutCard）
- [x] 21.分步表单：Steps 导航 + 步骤验证拦截 + 预览 + 提交重置 + 三态
- [x] 22.标签页分组：Tab 切换数据保留 + 跨 Tab 提交 + 三态
- [x] 23.折叠面板：展开/折叠 + 跨面板提交 + 三态
- [x] 24.卡片分组：3 Card 填写 + 卡片内验证 + 提交重置 + 三态

### 动态表单
- [ ] 25.动态增删字段
- [ ] 26.动态 Schema
- [ ] 27.模板复用

### 复杂组件
- [ ] 28.富文本编辑器
- [ ] 29.文件上传
- [ ] 30.地图选点
- [ ] 31.颜色选择器
- [ ] 32.代码编辑器
- [ ] 33.JSON 编辑器
- [ ] 34.手写签名
- [ ] 35.穿梭框
- [ ] 36.树形选择
- [ ] 37.Markdown
- [ ] 38.图标选择器
- [ ] 39.Cron 编辑器

### 表单状态
- [ ] 40.数据转换
- [ ] 41.多表单协作
- [ ] 42.表单快照
- [ ] 43.撤销重做
- [ ] 44.生命周期

### 其他能力
- [ ] 45.字段权限
- [ ] 46.国际化
- [ ] 47.表单比对
- [ ] 48.打印导出

---

## React 测试

（Vue 测试完成后，按相同矩阵测试 React playground）

### 已完成
- [x] React-场景1-编辑态: 布局正常、必填校验生效
- [x] 全部 48 场景加载测试: 全部通过
